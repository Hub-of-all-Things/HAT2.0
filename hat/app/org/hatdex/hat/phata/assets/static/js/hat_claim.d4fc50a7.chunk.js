(this["webpackJsonprumpel-react"]=this["webpackJsonprumpel-react"]||[]).push([[3],{100:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(26),n=a(27),i=a(39),c=a(40),s=a(0),o=a.n(s),l=(a(101),function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props;return o.a.createElement("div",null,e&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"notification-banner-container notification-banner-container-".concat(e.type)},"error"===e.type&&o.a.createElement("i",{className:"material-icons notification-banner-container-icon"},"warning"),e.message)))}}]),a}(s.Component))},101:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){(function(t){var a=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,o="object"==typeof self&&self&&self.Object===Object&&self,l=s||o||Function("return this")(),u=Object.prototype.toString,m=Math.max,p=Math.min,d=function(){return l.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var s=n.test(e);return s||i.test(e)?c(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,a){var r,n,i,c,s,o,l=0,u=!1,v=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var a=r,i=n;return r=n=void 0,l=t,c=e.apply(i,a)}function g(e){return l=e,s=setTimeout(E,t),u?b(e):c}function y(e){var a=e-o;return void 0===o||a>=t||a<0||v&&e-l>=i}function E(){var e=d();if(y(e))return C(e);s=setTimeout(E,function(e){var a=t-(e-o);return v?p(a,i-(e-l)):a}(e))}function C(e){return s=void 0,w&&r?b(e):(r=n=void 0,c)}function S(){var e=d(),a=y(e);if(r=arguments,n=this,o=e,a){if(void 0===s)return g(o);if(v)return s=setTimeout(E,t),b(o)}return void 0===s&&(s=setTimeout(E,t)),c}return t=h(t)||0,f(a)&&(u=!!a.leading,i=(v="maxWait"in a)?m(h(a.maxWait)||0,t):i,w="trailing"in a?!!a.trailing:w),S.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=o=n=s=void 0},S.flush=function(){return void 0===s?c:C(d())},S}}).call(this,a(43))},144:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),i=a(3),c=a(0),s=a.n(c),o=(a(137),a(138),function(e){return s.a.createElement("div",{className:"hat-claim-actions flex-column-wrapper flex-align-items-center"},s.a.createElement("button",{className:"btn btn-accent",onClick:function(){return e.setCurrentStep(e.currentStep+1)}},3===e.currentStep?"Confirm":5===e.currentStep?"login":"Next"),0!==e.currentStep&&3!==e.currentStep&&5!==e.currentStep&&s.a.createElement("button",{className:"btn btn-transparent",onClick:function(){return e.setCurrentStep(e.currentStep-1)}},"Previous"),3===e.currentStep&&s.a.createElement("div",{className:"text-small",style:{textAlign:"center",marginTop:"1.8rem"}},"By selecting 'Confirm', I agree to the Dataswift\xa0",s.a.createElement("a",{href:"https://cdn.dataswift.io/legal/hat-owner-terms-of-service.pdf",rel:"noopener noreferrer",target:"_blank"},"Terms of Service"),"\xa0 and"," ",s.a.createElement("a",{href:"https://cdn.dataswift.io/legal/dataswift-privacy-policy.pdf",rel:"noopener noreferrer",target:"_blank"},"Privacy Policy"),"."))}),l=(a(139),"Claim your HAT"),u="This information is only used to create your HAT Microserver. Your personal information will never be shared with anyone unless you authorise it.",m="Subscribe to MadHATTERs (Tech news, HAT slanted)",p="Your HAT URL",d="This is your HAT Microserver URL. After clicking 'Next' you will be able to choose your password.",f="Choose your password",h="Your data is precious - keep it safe with a password that is Strong or Very Strong.",v="Your HAT Microserver",w="You are claiming a HAT Microserver with 100MB storage.",b=a(6),g=a(12);function y(e,t){return{type:g.a.EDIT_HAT_CLAIM,name:e,value:t}}function E(e){return{type:g.a.EDIT_CURRENT_STEP,step:e}}function C(e,t){return{type:g.a.EDIT_HAT_PASSWORD,name:e,value:t}}function S(e){return{type:g.a.EDIT_HAT_CLAIM_ERROR_MSG,message:e}}var x=a(13),N=Object(x.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep}}),(function(e){return Object(b.b)({editHatClaim:y},e)}))((function(e){return 0!==e.currentStep?null:s.a.createElement("div",{className:"hat-claim-email flex-column-wrapper flex-content-center flex-align-items-center"},s.a.createElement("h2",null,l),s.a.createElement("div",{className:"text-medium"},u),s.a.createElement("input",{placeholder:"email",type:"email",disabled:!0,value:e.hatClaim.email||"Unspecified email address"}),s.a.createElement("div",{className:"checkbox-container"},s.a.createElement("label",{className:"text-medium",htmlFor:"newsletterOptin"},m,s.a.createElement("input",{id:"newsletterOptin",name:"newsletterOptin",type:"checkbox",checked:e.hatClaim.optins,onChange:function(t){return e.editHatClaim("optins",t.target.checked)}}),s.a.createElement("span",{className:"checkbox-checkmark"}))),s.a.createElement("div",{className:"text-small text-align-left"},"You can change your mind at any time by clicking the unsubscribe link in the footer of any email you receive from us. Learn how we treat your information with respect in our\xa0",s.a.createElement("a",{href:"https://cdn.dataswift.io/legal/dataswift-privacy-policy.pdf",target:"_blank",rel:"noopener noreferrer"},"privacy policy."),"\xa0 By clicking \u2018Next\u2019 you agree to have read the privacy policy."))})),O=(a(140),Object(x.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep}}),(function(e){return Object(b.b)({editHatClaim:y},e)}))((function(e){return 1!==e.currentStep?null:s.a.createElement("div",{className:"hat-claim-url flex-column-wrapper flex-content-center flex-align-items-center"},s.a.createElement("h2",null,p),s.a.createElement("div",{className:"title-hat-domain-wrapper"},s.a.createElement("div",{className:"hat-name"},s.a.createElement("h3",null,e.hatClaim.hatName)),s.a.createElement("div",{className:"hat-domain"},s.a.createElement("h3",null,".",e.hatClaim.hatCluster))),s.a.createElement("div",{className:"text-medium"},d))}))),j=a(91),T=(a(141),a(26)),H=a(27),k=a(39),A=a(40),M=(a(142),function(e){Object(A.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(T.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).createPasswordLabel=function(e){switch(e){case 0:case 1:return"Too weak";case 2:return"So-so";case 3:return"Strong";case 4:return"Very Strong";default:return""}},e.getPasswordStrengthProgress=function(e){return e<=1?1:2===e?2:4},e}return Object(H.a)(a,[{key:"render",value:function(){var e=this.props.passwordStrength;return s.a.createElement("div",{className:"password-strength-meter"},e&&s.a.createElement(s.a.Fragment,null,s.a.createElement("progress",{className:"password-strength-meter-progress strength-".concat(e.score),value:this.getPasswordStrengthProgress(e.score),max:"4"}),s.a.createElement("br",null),s.a.createElement("div",{className:"password-strength-meter-label text-strength-".concat(e.score)},this.createPasswordLabel(e.score))))}}]),a}(c.Component)),P=a(143),_=Object(x.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep,password:e.hatClaim.password}}),(function(e){return Object(b.b)({editHatClaim:y,editHatClaimPassword:C,editHatClaimErrorMessage:S},e)}))((function(e){var t=Object(c.useState)(!0),a=Object(j.a)(t,2),r=a[0],n=a[1],i=Object(c.useState)(!0),o=Object(j.a)(i,2),l=o[0],u=o[1],m=P((function(t){return function(t){var a=zxcvbn(t).score;e.editHatClaimPassword("passwordStrength",{score:a})}(t)}),400),p=P((function(){return v(e.password.password,e.password.passwordConfirm)}),400);var d=function(t){var a=t.target,r=a.name,n=a.value;e.editHatClaimPassword(r,n),"password"===r&&(m(n),e.editHatClaim(r,n))},v=function(t,a){return t===a?e.password.passwordStrength.score>2&&(e.editHatClaimErrorMessage(""),!0):(a.length>5&&e.editHatClaimErrorMessage("Your passwords don't match!"),!1)};return Object(c.useEffect)((function(){p()}),[e.password.password,e.password.passwordConfirm]),2!==e.currentStep?null:s.a.createElement("div",{className:"hat-claim-password flex-column-wrapper flex-content-center flex-align-items-center"},s.a.createElement("h2",null,f),s.a.createElement("div",{className:"title-hat-domain-wrapper"},s.a.createElement("div",{className:"hat-name"},s.a.createElement("h3",null,e.hatClaim.hatName)),s.a.createElement("div",{className:"hat-domain"},s.a.createElement("h3",null,".",e.hatClaim.hatCluster))),s.a.createElement("div",{className:"text-medium"},h),s.a.createElement("form",null,s.a.createElement("input",{name:"username",autoComplete:"username",type:"text",hidden:!0}),s.a.createElement("div",{className:"input-password-container"},s.a.createElement("input",{type:r?"password":"text",name:"password",autoComplete:"new-password",value:e.hatClaim.password,onChange:function(e){return d(e)},placeholder:"Password"}),s.a.createElement("button",{type:"button",tabIndex:-1,onClick:function(){return n(!r)}},s.a.createElement("i",{className:"material-icons"},r?" visibility_off":" visibility"))),s.a.createElement("div",{className:"input-password-container"},s.a.createElement("input",{type:l?"password":"text",name:"passwordConfirm",autoComplete:"new-password",value:e.password.passwordConfirm,onChange:function(e){return d(e)},placeholder:"Confirm Password"}),s.a.createElement("button",{type:"button",tabIndex:-1,onClick:function(){return u(!l)}},s.a.createElement("i",{className:"material-icons"},l?" visibility_off":" visibility")))),e.password.password.length>0&&s.a.createElement(M,{passwordStrength:e.password.passwordStrength}))})),I=function(e){return 3!==e.currentStep?null:s.a.createElement("div",{className:"hat-claim-url flex-column-wrapper flex-content-center flex-align-items-center"},s.a.createElement("h2",null,v),s.a.createElement("div",{className:"text-medium"},w))},R=a(8),D=a(90),Y=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,L=a(16),z=["MadHATTERS","HAT Monthly","HCF"],U=function(e){return{email:e.email,termsAgreed:!0,optins:e.optins?z:[],hatName:e.hatName,hatCluster:e.hatCluster,password:e.password}},B=function(){var e=Object(i.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"post",body:JSON.stringify(a),headers:F()},e.next=3,Object(L.b)("https://".concat(a.hatName+"."+a.hatCluster,"/control/v2/auth/claim/complete/").concat(t),a,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function F(){var e=new Headers;return e.append("Content-Type","application/json"),e}a(144);var $=a(99),J=a.n($),W=Object(x.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep}}),(function(e){return Object(b.b)({editHatClaim:y},e)}))((function(e){return 5!==e.currentStep?null:s.a.createElement("div",{className:"hat-claim-success flex-column-wrapper flex-content-center flex-align-items-center"},s.a.createElement("h2",null,"Success!"),s.a.createElement("div",{className:"text-medium"},"Your HAT Microserver with the following URL has been claimed."),s.a.createElement("div",{className:"title-hat-domain-wrapper"},s.a.createElement("div",{className:"hat-name"},s.a.createElement("h3",null,e.hatClaim.hatName)),s.a.createElement("div",{className:"hat-domain"},s.a.createElement("h3",null,".",e.hatClaim.hatCluster))),s.a.createElement("div",{className:"your-hat-issuer"},"Your HAT issuer is"),s.a.createElement("div",{className:"issuer-logo"},s.a.createElement("img",{src:"https://cdn.dataswift.io/dataswift/logo/ds-full-dark.svg",alt:"Dataswift"})),s.a.createElement("div",{className:"drp-image"},s.a.createElement("img",{src:J.a,alt:"Data rights protected"})),s.a.createElement("div",{className:"text-medium"},"This icon appears every time you access your HAT Microserver and whenever you issue instructions to your HAT Microserver. Data rights protection ensures your HAT Microserver is always secure and that the rights to your data are preserved."))})),V=a(100);t.default=Object(x.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep,password:e.hatClaim.password,errorMsg:e.hatClaim.errorMsg}}),(function(e){return Object(b.b)({editHatClaim:y,setCurrentStep:E,editHatClaimPassword:C,editHatClaimErrorMessage:S},e)}))((function(e){var t=Object(R.i)().claimToken;function a(){return(a=Object(i.a)(n.a.mark((function a(i){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.editHatClaimErrorMessage(""),a.next=4,B(t||"",U(e.hatClaim));case 4:a.sent.parsedBody&&r(i+1),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),e.editHatClaimErrorMessage("Something went wrong, please try again"),r(i-1);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))).apply(this,arguments)}Object(c.useEffect)((function(){var t=Object(D.a)("email"),a=window.location.hostname,r=a.substring(0,a.indexOf(".")),n=a.substring(a.indexOf(".")+1);t&&(e.editHatClaim("email",t),e.editHatClaim("hatName",r),e.editHatClaim("hatCluster",n),function(e){var t=document.getElementById("zxcvbn");if(!t){var a=document.createElement("script");a.src="https://cdn.dataswift.io/libs/zxcvbn/4.4.2/zxcvbn.min.js",a.id="zxcvbn",a.type="text/javascript",a.async=!0,document.body.appendChild(a),a.onload=function(){e&&e()}}t&&e&&e()}((function(){})))}),[]);var r=function(t){var r;1===t?(r=e.hatClaim.email,Y.test(r)&&e.setCurrentStep(t)):3===t?e.password.passwordStrength.score>=2&&e.password.password===e.password.passwordConfirm&&e.setCurrentStep(t):4===t?function(e){a.apply(this,arguments)}(t):5===t?e.setCurrentStep(t):6===t?function(){var e=window.location.hostname;window.location.href="https://".concat(e,"/#/user/login")}():e.setCurrentStep(t)};return s.a.createElement("div",{className:"hat-claim flex-column-wrapper"},e.errorMsg&&s.a.createElement(V.a,{type:"error",message:e.errorMsg}),s.a.createElement("span",{className:"flex-spacer-small"}),s.a.createElement(N,null),s.a.createElement(O,null),s.a.createElement(_,null),s.a.createElement(I,{currentStep:e.currentStep}),s.a.createElement(W,null),s.a.createElement("span",{className:"flex-spacer-large"}),s.a.createElement(o,{currentStep:e.currentStep,setCurrentStep:function(e){return r(e)}}))}))},90:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var r=t[a].split("=");if(r[0]===e)return decodeURIComponent(r[1])}return null}},91:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(41);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,n=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(a.push(c.value),!t||a.length!==t);r=!0);}catch(o){n=!0,i=o}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return a}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},99:function(e,t,a){e.exports=a.p+"static/media/hat-data-rights.2c50a9f4.png"}}]);
//# sourceMappingURL=hat_claim.d4fc50a7.chunk.js.map