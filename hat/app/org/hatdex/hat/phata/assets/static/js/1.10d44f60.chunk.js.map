{"version":3,"sources":["assets/icons/hat-data-rights-icon.svg","assets/icons/app-logo-placeholder.svg","features/hmi/HmiActions.tsx","features/hmi/HmiDaasHeader.tsx","features/hmi/HmiPermissions.tsx","features/hmi/HmiBaasReadAndWrite.tsx","features/hmi/HmiPermissionDialog.tsx","components/AppCard/AppCard.tsx","features/hmi/HmiDataPlug.tsx","features/hmi/HmiDataDebit.tsx","utils/unbundle.ts","components/AppLogo/AppLogo.tsx","features/hmi/HmiRating.tsx","features/hmi/HmiDaas.tsx","features/hmi/HmiBaasHeader.tsx","features/hmi/HmiBaas.tsx","features/hmi/Hmi.tsx","assets/icons/data-plug-lego-icon.png","assets/icons/data-share.svg","utils/query-params.ts","features/messages/FormatMessage.tsx","features/hmi/hmi.interface.ts"],"names":["module","exports","HmiActions","props","parentApp","useSelector","selectParentApp","className","onClick","cancelStep","id","nextStep","application","info","version","href","target","rel","HmiDaasHeader","hatName","window","location","host","hmiDescription","name","src","logo","alt","HmiPermissions","permissionProps","this","permissions","elements","processPermissionRoles","rolesGranted","FormatMessage","values","appName","map","value","index","key","roles","role","detail","Component","HmiBaasReadAndWrite","dependencyApps","selectDependencyApps","ExpansionPanel","square","ExpansionPanelSummary","aria-controls","expandIcon","ExpansionPanelDetails","depApp","DialogTitle","withStyles","theme","createStyles","root","color","letterSpacing","fontWeight","fontSize","closeButton","position","right","spacing","top","palette","grey","children","classes","onClose","disableTypography","IconButton","aria-label","DialogContent","padding","MuiDialogContent","DialogActions","margin","justifyContent","MuiDialogActions","HmiPermissionDialog","handleClose","switchDialog","app","Dialog","aria-labelledby","open","dividers","Button","style","AppCard","appId","HmiDataPlug","useState","openDialog","setOpenDialog","length","type","HmiDataDebit","dataRequired","bundle","arr","propertyQuery","endpoints","flatten","endpointQuery","title","endpoint","replace","fields","mapping","uniqBy","Object","keys","path","split","unbundle","graphics","normal","dataShareLogo","appLogoPlaceholder","field","dataUsePurpose","AppLogoRating","rating","AppLogo","placeholder","HmiRating","score","ratingPoints","points","HmiDaas","HmiBaasHeader","marginBottom","HmiBaas","Hmi","hmiType","HmiType","daas","baas","getParameterByName","variable","vars","search","substring","i","pair","decodeURIComponent","messages","selectMessages","message","formattedMsg","entries","updateMessageValues"],"mappings":"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","file":"static/js/1.10d44f60.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/hat-data-rights-icon.3146c94e.svg\";","module.exports = __webpack_public_path__ + \"static/media/app-logo-placeholder.a8c652a8.svg\";","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { HmiType } from \"./hmi.interface\";\nimport { selectParentApp } from \"./hmiSlice\";\nimport { FormatMessage } from \"../messages/FormatMessage\";\n\ntype Props = {\n  registrationType: HmiType;\n  nextStep: () => void;\n  cancelStep: () => void;\n};\n\nexport const HmiActions: React.FC<Props> = props => {\n  const parentApp = useSelector(selectParentApp);\n\n  if (!parentApp) {\n    return null;\n  }\n\n  return (\n    <div className=\"hmi-actions-footer\">\n      <div className=\"sticky-action-panel-content\">\n        <div className=\"action-buttons\">\n          <button className=\"secondary-action\" onClick={() => props.cancelStep()}>\n            <FormatMessage id={'hatters.hmi.actions.cancel'} />\n          </button>\n          <button className=\"primary-action\" onClick={() => props.nextStep()}>\n            <FormatMessage id={'hatters.hmi.actions.confirm'} />\n          </button>\n        </div>\n\n        <p className=\"hmi-id-text\">\n          HMI ID: {parentApp.application.id}-{parentApp.application.info.version}\n        </p>\n        <p className=\"tos-text\">\n          <FormatMessage id={'hatters.hmi.actions.agreeWithTermsAndPrivacy.part1'} />\n          <a\n            href=\"https://cdn.dataswift.io/legal/hat-owner-terms-of-service.pdf\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <FormatMessage id={'hatters.hmi.actions.agreeWithTermsAndPrivacy.termsOfService'} />\n          </a>\n          <FormatMessage id={'hatters.hmi.actions.agreeWithTermsAndPrivacy.part2'} />\n        </p>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport logo from '../../assets/icons/hat-data-rights-icon.svg';\nimport { selectParentApp } from \"./hmiSlice\";\n\nexport const HmiDaasHeader: React.FC = () => {\n  const hatName = window.location.host;\n  const parentApp = useSelector(selectParentApp);\n\n  if (!parentApp) {\n    return null;\n  }\n  const hmiDescription = parentApp.application.info.hmiDescription;\n\n  return (\n    <div className={'hmi-daas-header-wrapper'}>\n      <div className={'hmi-section-title'}>{hatName}</div>\n\n      <div className={'hmi-text-grey'}>\n        {hmiDescription ||\n          `Our friends at ${ parentApp.application.info.name } have requested for a Personal Data Account to be \n          created with the above URL. Check your email for more details.`\n        }\n      </div>\n\n      <div className={'hmi-separator'} />\n\n      <img className={'hmi-data-rights-img'} src={logo} alt={'HAT Data rights protected'} />\n    </div>\n  );\n};\n","import React, { Component } from 'react';\nimport { BundleStructure } from '@dataswift/hat-js/lib/interfaces/bundle.interface';\nimport { FormatMessage } from \"../messages/FormatMessage\";\n\nexport class HmiPermissions extends Component<IPermissionsProps> {\n  static processPermissionRoles(roles: Array<{ role: string; detail?: string }>): Array<JSX.Element> {\n    return roles.map(role => {\n      switch (role.role) {\n        case 'namespaceread':\n          return <FormatMessage id={`hatters.hmi.permissions.read`} values={{ name: role.detail }} />;\n        case 'namespacewrite':\n          return <FormatMessage id={`hatters.hmi.permissions.write`} values={{ name: role.detail }} />;\n        case 'managefiles':\n          return <FormatMessage id={`hatters.hmi.permissions.manageFiles`} values={{ name: role.detail }} />;\n        case 'applicationmanage':\n          return <FormatMessage id={`hatters.hmi.permissions.manageApplications`} values={{ name: role.detail }} />;\n        case 'applicationlist':\n          return <FormatMessage id={`hatters.hmi.permissions.listApplications`} />;\n        case 'datadebit':\n          return <FormatMessage id={`hatters.hmi.permissions.dataDebit`} values={{ 'data-debit': role.detail }} />;\n        case 'owner':\n          return <FormatMessage id={`hatters.hmi.permissions.owner`} />;\n        default:\n          return <FormatMessage id={`hatters.hmi.permissions.unknown`} />;\n      }\n    });\n  }\n\n  render() {\n    const permissionProps = this.props.permissions;\n    const elements = HmiPermissions.processPermissionRoles(permissionProps.rolesGranted);\n\n    return (\n      <div>\n        {elements && (\n          <>\n            <div className={'hmi-card-title'}>\n              <FormatMessage id={`hatters.hmi.permissions.appAbleTo`} values={{ name: this.props.appName }} />\n            </div>\n            <ul className=\"instruction-list\">\n              {elements.map((value, index) => {\n                return (\n                  <li className=\"list-item\" key={index}>\n                    {value}\n                  </li>\n                );\n              })}\n            </ul>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\ninterface IPermissionsProps {\n  appName: string;\n  permissions: HatApplicationPermissions;\n}\n\ninterface HatApplicationDataRequired {\n  bundle: BundleStructure;\n  startDate: string;\n  endDate: string;\n  rolling: boolean;\n}\n\nexport interface HatApplicationPermissions {\n  rolesGranted: { role: string; detail?: string }[];\n  dataRequired?: HatApplicationDataRequired;\n  dataRetrieved?: BundleStructure;\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport { selectDependencyApps, selectParentApp } from \"./hmiSlice\";\nimport { HmiPermissions } from \"./HmiPermissions\";\n\nexport const HmiBaasReadAndWrite: React.FC = () => {\n  const parentApp = useSelector(selectParentApp);\n  const dependencyApps = useSelector(selectDependencyApps);\n\n  if (!parentApp) {\n    return null;\n  }\n\n  if (parentApp.application.permissions) {\n    return (\n      <div>\n        <div className={'hmi-section-title'}>{parentApp.application.info.name} wants to access your HAT PDA.</div>\n        <div className={'hmi-text-grey'}>\n          You are giving {parentApp.application.info.name} the following permissions:\n        </div>\n\n        <ExpansionPanel className={'expansion-panel'} square={false}>\n          <ExpansionPanelSummary\n            aria-controls=\"panel1a-content\"\n            expandIcon={<i className=\"material-icons\">keyboard_arrow_down</i>}\n            id=\"panel1a-header\"\n          >\n            <div className={'hmi-card-title'}>Read and write access to folders.</div>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <div className={'hmi-card-subtitle'}>\n              {dependencyApps &&\n                dependencyApps.map(depApp => {\n                  return (\n                    <HmiPermissions\n                      appName={depApp.application.info.name}\n                      key={depApp.application.id}\n                      permissions={depApp.application.permissions}\n                    />\n                  );\n                })}\n              <HmiPermissions\n                appName={parentApp.application.info.name}\n                permissions={parentApp.application.permissions}\n              />\n            </div>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n      </div>\n    );\n  } else {\n    return null;\n  }\n};\n","import React, { Component } from 'react';\nimport { createStyles, Theme, withStyles, WithStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport { HatApplication } from '@dataswift/hat-js/lib/interfaces/hat-application.interface';\nimport { HmiPermissions } from \"./HmiPermissions\";\nimport { FormatMessage } from \"../messages/FormatMessage\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      color: '#4a556b',\n      letterSpacing: '0.4px',\n      fontWeight: 'bold',\n      fontSize: '18px',\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500],\n    },\n  });\n\nexport interface DialogTitleProps extends WithStyles<typeof styles> {\n  id: string;\n  children: React.ReactNode;\n  onClose: () => void;\n}\n\nconst DialogTitle = withStyles(styles)((props: DialogTitleProps) => {\n  const { children, classes, onClose } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root}>\n      <div>{children}</div>\n      {onClose ? (\n        <IconButton aria-label=\"Close\" className={classes.closeButton} onClick={onClose}>\n          {/*<CloseIcon />*/}\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  );\n});\n\nconst DialogContent = withStyles((theme: Theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme: Theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n    justifyContent: 'center',\n  },\n}))(MuiDialogActions);\n\nclass HmiPermissionDialog extends Component<IPermissionDialog> {\n  handleClose = () => {\n    this.props.switchDialog(false);\n  };\n\n  render() {\n    const app = this.props.app;\n    const dependencyApps = this.props.dependencyApps;\n\n    return (\n      <div>\n        <Dialog onClose={this.handleClose} aria-labelledby=\"customized-dialog-title\" open={this.props.open}>\n          <DialogTitle id=\"customized-dialog-title\" onClose={this.handleClose}>\n            <FormatMessage id={'hatters.hmi.permissions.dialog.title'} />\n          </DialogTitle>\n          <DialogContent dividers>\n            {dependencyApps &&\n              dependencyApps.map(depApp => {\n                return (\n                  <HmiPermissions\n                    key={depApp.application.id}\n                    appName={depApp.application.info.name}\n                    permissions={depApp.application.permissions}\n                  />\n                );\n              })}\n            <HmiPermissions permissions={app.application.permissions} appName={app.application.info.name} />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleClose} style={{ fontSize: '1.4rem' }} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\ninterface IPermissionDialog {\n  open: boolean;\n  app: HatApplication;\n  dependencyApps?: HatApplication[];\n  switchDialog: any;\n}\n\nexport default HmiPermissionDialog;\n","import React from 'react';\nimport './AppCard.scss';\nimport logo from '../../assets/icons/data-plug-lego-icon.png';\n\nexport const AppCard: React.FC<OwnProps> = props => {\n  return (\n    <div className={'app-card-container'}>\n      <div className={`app-card-img-wrapper app-card-img-${ props.appId }`}>\n        <img src={logo} alt={'Data plug'} />\n      </div>\n      <div className={'app-card-name'}>{props.appName}</div>\n    </div>\n  );\n};\n\ninterface OwnProps {\n  appId: string;\n  appName: string;\n}\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { selectDependencyApps, selectParentApp } from \"./hmiSlice\";\nimport HmiPermissionDialog from \"./HmiPermissionDialog\";\nimport { FormatMessage } from \"../messages/FormatMessage\";\nimport { AppCard } from \"../../components/AppCard/AppCard\";\n\nexport const HmiDataPlug: React.FC = () => {\n  const [openDialog, setOpenDialog] = useState(false);\n  const parentApp = useSelector(selectParentApp);\n  const dependencyApps = useSelector(selectDependencyApps);\n\n  if (!parentApp || dependencyApps.length === 0) {\n    return null;\n  }\n\n  return (\n    <div>\n      <div className={'hmi-section-title'}>\n        <FormatMessage id={'hatters.hmi.plug.title'} />\n      </div>\n      <div className={'hmi-text-grey'}>\n        <FormatMessage id={'hatters.hmi.plug.description'} />\n      </div>\n\n      {dependencyApps.map(app => {\n        return <AppCard key={app.application.id} appId={app.application.id} appName={app.application.info.name} />;\n      })}\n\n      <div className={'hmi-text-grey'}>\n        <FormatMessage id={'hatters.hmi.plug.takeActions'} />\n        &nbsp;\n        <button className=\"link-button\" type={'button'} onClick={() => setOpenDialog(true)}>\n          <FormatMessage id={'hatters.hmi.plug.showPermissions'} />\n        </button>\n      </div>\n\n      <HmiPermissionDialog\n        open={openDialog}\n        app={parentApp}\n        dependencyApps={dependencyApps}\n        switchDialog={() => setOpenDialog(!openDialog)}\n      />\n    </div>\n  );\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport appLogoPlaceholder from '../../assets/icons/app-logo-placeholder.svg';\nimport dataShareLogo from '../../assets/icons/data-share.svg';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport { selectParentApp } from \"./hmiSlice\";\nimport { unbundle } from \"../../utils/unbundle\";\nimport { FormatMessage } from \"../messages/FormatMessage\";\n\nexport const HmiDataDebit: React.FC = () => {\n  const parentApp = useSelector(selectParentApp);\n\n  if (!parentApp) {\n    return null;\n  }\n\n  const { permissions, info } = parentApp.application;\n\n  if (permissions.dataRequired && permissions.dataRequired.bundle) {\n    const bundle = unbundle(permissions.dataRequired.bundle.bundle);\n    const logo = info.graphics.logo.normal;\n\n    return (\n      <div className={'hmi-data-debit'}>\n        <div className={'hmi-data-share-wrapper'}>\n          <img className={'data-share-icon'} src={dataShareLogo} alt={'Data share logo'} />\n          <img className={'data-share-logo'} src={logo || appLogoPlaceholder} alt={'Application logo'} />\n        </div>\n        <div className={'hmi-section-title'}>\n          <FormatMessage\n            id={'hatters.hmi.dataDebit.title'}\n            values={{\n              name: info.name,\n            }}\n          />\n        </div>\n        <div className={'hmi-text-grey'}>\n          <FormatMessage id={'hatters.hmi.dataDebit.givingPermissions'} />\n        </div>\n\n        <ExpansionPanel className={'expansion-panel'} square={false}>\n          <ExpansionPanelSummary\n            aria-controls=\"panel1a-content\"\n            expandIcon={<i className=\"material-icons\">keyboard_arrow_down</i>}\n            id=\"panel1a-header\"\n          >\n            <div className={'hmi-card-title'}>\n              <FormatMessage id={'hatters.hmi.dataDebit.useYourData'} />\n            </div>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <div className={'hmi-card-subtitle'}>\n              <FormatMessage id={'hatters.hmi.dataDebit.appAbleToUse'} />\n              <br />\n              <br />\n\n              {bundle.map(value => {\n                return (\n                  <div className={'hmi-data-debit-list-wrapper'} key={value.title}>\n                    <div>{value.title} data</div>\n                    <ul className={'hmi-data-debit-list'}>\n                      {value.fields.map(field => {\n                        return <li key={field}>{field}</li>;\n                      })}\n                    </ul>\n                  </div>\n                );\n              })}\n            </div>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n\n        <div className={'hmi-card'}>\n          <div className={'hmi-card-content'}>\n            <div className={'hmi-card-title'}>\n              <FormatMessage id={'hatters.hmi.dataDebit.purposeOfDataUsage'} />\n            </div>\n            <div className={'hmi-card-subtitle'}>{info.dataUsePurpose}</div>\n          </div>\n        </div>\n      </div>\n    );\n  } else {\n    return null;\n  }\n};\n","import { flatten, uniqBy, values } from 'lodash';\nimport { EndpointQuery, PropertyQuery } from '@dataswift/hat-js/lib/interfaces/bundle.interface';\n\nexport const unbundle = (bundle: {\n  [bundleVersion: string]: PropertyQuery;\n}): { title: string; fields: string[]; expanded?: boolean }[] => {\n  // Get a nested array of EndpointQueries\n  const arr: EndpointQuery[][] = values(bundle).map((propertyQuery: PropertyQuery) => propertyQuery.endpoints);\n\n  // Reformat for easy parsing in the template\n  return flatten(arr).map((endpointQuery: EndpointQuery) => {\n    return {\n      title: endpointQuery.endpoint.replace('/', ' '),\n      fields: endpointQuery.mapping\n        ? uniqBy(Object.keys(endpointQuery.mapping), path => path.split('.')[0]).map(name =>\n          name.replace(/_/g, ' ')\n        )\n        : ['NONE'],\n    };\n  });\n};\n","import React from 'react';\nimport './AppLogo.scss';\nimport placeholder from '../../assets/icons/app-logo-placeholder.svg';\nimport { FormatMessage } from \"../../features/messages/FormatMessage\";\n\nconst AppLogoRating: React.FC<OwnProps> = props => {\n  return (\n    <>\n      {props.rating && (\n        <>\n          <div className=\"app-rating-wrapper\">\n            <div className={`app-rating`}>\n              <span className=\"app-rating-highlighted\">{props.rating}</span>\n            </div>\n          </div>\n\n          <div className=\"app-details-header-headline\">\n            <FormatMessage\n              id={'hatters.hmi.rating.appIsRated'}\n              values={{\n                rating: props.rating,\n              }}\n            />\n          </div>\n          <a\n            href=\"https://www.hatcommunity.org/hat-dex-rating\"\n            target=\"_blank\"\n            className=\"app-link\"\n            rel=\"noopener noreferrer\"\n          >\n            <FormatMessage id={'hatters.hmi.rating.learnMore'} />\n          </a>\n        </>\n      )}\n    </>\n  );\n};\n\nexport const AppLogo: React.FC<OwnProps> = props => {\n  return (\n    <div className={'app-logo-container'}>\n      <div className=\"app-logo-wrapper\">\n        <img src={props.src || placeholder} alt={'Application logo'} className=\"img img-responsive app-logo\" />\n      </div>\n\n      <AppLogoRating {...props} />\n    </div>\n  );\n};\n\ninterface OwnProps {\n  src: string;\n  rating?: string;\n  ratingPoints?: number;\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { selectParentApp } from \"./hmiSlice\";\nimport { FormatMessage } from \"../messages/FormatMessage\";\nimport { AppLogo } from \"../../components/AppLogo/AppLogo\";\n\nexport const HmiRating: React.FC = () => {\n  const parentApp = useSelector(selectParentApp);\n\n  if (!parentApp) {\n    return null;\n  }\n\n  const { info } = parentApp.application;\n\n  return (\n    <div>\n      <div className={'hmi-section-title'}>\n        <FormatMessage id={'hatters.hmi.rating.title'} values={{ name: info.name }} />\n      </div>\n      <div className={'rating-privacy-text'}>\n        <FormatMessage id={'hatters.hmi.rating.description.withDataDebit'} values={{ name: info.name }} />\n      </div>\n      <AppLogo src={info.graphics.logo.normal} rating={info.rating.score} ratingPoints={info.rating.points} />\n    </div>\n  );\n};\n","import React from 'react';\nimport { useSelector } from \"react-redux\";\nimport { selectDependencyApps } from \"./hmiSlice\";\nimport { HmiDaasHeader } from \"./HmiDaasHeader\";\nimport { HmiBaasReadAndWrite } from \"./HmiBaasReadAndWrite\";\nimport { HmiDataPlug } from \"./HmiDataPlug\";\nimport { HmiDataDebit } from \"./HmiDataDebit\";\nimport { HmiRating } from \"./HmiRating\";\n\nexport const HmiDaas: React.FC = () => {\n  const dependencyApps = useSelector(selectDependencyApps);\n\n  return (\n    <>\n      <HmiDaasHeader />\n      {dependencyApps.length === 0 ? (\n        <HmiBaasReadAndWrite />\n      ): (\n        <HmiDataPlug />\n      )\n      }\n      <HmiDataDebit />\n      <HmiRating />\n    </>\n  );\n};\n","import React from 'react';\nimport logo from '../../assets/icons/hat-data-rights-icon.svg';\n\nexport const HmiBaasHeader: React.FC = () => {\n  return (\n    <div className={'hmi-daas-header-wrapper'}>\n      <img\n        className={'hmi-data-rights-img'}\n        style={{ marginBottom: '0' }}\n        src={logo}\n        alt={'HAT Data rights protected'}\n      />\n    </div>\n  );\n};\n","import React from 'react';\nimport { HmiBaasHeader } from \"./HmiBaasHeader\";\nimport { HmiBaasReadAndWrite } from \"./HmiBaasReadAndWrite\";\nimport { HmiRating } from \"./HmiRating\";\nimport { HmiDataDebit } from \"./HmiDataDebit\";\n\nexport const HmiBaas: React.FC = () => {\n\n  return (\n    <div>\n      <HmiBaasHeader />\n      <HmiBaasReadAndWrite />\n      <HmiDataDebit />\n      <HmiRating />\n    </div>\n  );\n};\n","import React from 'react';\nimport './Hmi.scss';\nimport { useSelector } from \"react-redux\";\nimport { HmiType } from \"./hmi.interface\";\nimport { selectParentApp } from \"./hmiSlice\";\nimport { HmiDaas } from \"./HmiDaas\";\nimport { HmiBaas } from \"./HmiBaas\";\n\ntype Props = {\n  path?: string;\n  hmiType: HmiType;\n};\n\nexport const Hmi: React.FC<Props> = props => {\n  const parentApp = useSelector(selectParentApp);\n\n  return (\n    <div className={'hmi-page'}>\n      <div className={'hmi-page-wrapper'}>\n        {parentApp && props.hmiType === HmiType.daas && <HmiDaas />}\n        {parentApp && props.hmiType === HmiType.baas && <HmiBaas />}\n      </div>\n    </div>\n  );\n};\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAoCAYAAACxbNkLAAAAAXNSR0IArs4c6QAAAPxJREFUaAXtmDEOglAQRPlqo6Eweggra0trr0G8DCeytrS20UN4BPMdW7IrTEw2HzIkFOz83fnMAwqqamJH8u4n57yHdvJ0p35LKV0dzSzD5wjhYIp+8QKfuy8bCowanOzRGqN+lmDQsiZY33hDZ54w1rpuqHRyIlQ6oQW+GGtscm5stDZqfaUl5m37FnX0Ved6yGXt+LwThAcm7IZMGcGap96h0imJkAgFJ6BHLjhw2k6E6MiCG0QoOHDaToToyIIbRCg4cNpOhOjIghtEKDhw2k6E6MiCG0QoOHDaToToyIIbRCg4cNpucoS+P+vPiGFDR1Fmw6vMbf2xqw82g4tBmUTiiQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/data-share.af27aaac.svg\";","/**\n * Search for a url parameter with a specific id.\n * This function returns the parameter's value or empty.\n *\n * @returns {String}\n */\nexport const getParameterByName = (variable: string): string | null => {\n  const query = window.location.search.substring(1);\n  const vars = query.split('&');\n\n  for (let i = 0; i < vars.length; i++) {\n    const pair = vars[i].split('=');\n    if (pair[0] === variable) {\n      return decodeURIComponent(pair[1]);\n    }\n  }\n  return null;\n};\n\n/**\n * Search for a hash url parameter with a specific id.\n * This function returns the parameter's value or empty.\n *\n * @returns {String}\n */\nexport const getHashParameterByName = (variable: string): string | null => {\n  const query = window.location.hash.split('?');\n  if (query && query.length === 2) {\n    const vars = query[1].split('&');\n\n    for (let i = 0; i < vars.length; i++) {\n      const pair = vars[i].split('=');\n      if (pair[0] === variable) {\n        return decodeURIComponent(pair[1]);\n      }\n    }\n  }\n\n  return null;\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { selectMessages } from \"./messagesSlice\";\n\ntype Props = {\n  id: string;\n  values?: object;\n};\n\nexport const FormatMessage: React.FC<Props> = props => {\n  const messages = useSelector(selectMessages);\n\n  const updateMessageValues = (message: string, values?: object): string => {\n    if (values) {\n      let formattedMsg = message;\n\n      for (const [key, value] of Object.entries(values)) {\n        formattedMsg = message.replace(`{${ key }}`, value);\n      }\n\n      return formattedMsg;\n    }\n\n    return message;\n  };\n\n  const { id, values } = props;\n  const message = messages && messages[id];\n  if (!message) {\n    return null;\n  }\n\n  const formattedMsg = updateMessageValues(message, values);\n\n  return <>{formattedMsg}</>;\n};\n","export enum HmiType {\n  baas = 'hmi/baas',\n  daas = 'hmi/daas',\n}\n"],"sourceRoot":""}