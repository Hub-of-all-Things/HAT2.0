(this["webpackJsonprumpel-react"]=this["webpackJsonprumpel-react"]||[]).push([[3],{47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){e.exports=a.p+"static/media/hat-data-rights.2c50a9f4.png"},58:function(e,t,a){"use strict";a.r(t);var r=a(39),n=a.n(r),s=a(40),c=a(0),i=a.n(c),l=(a(47),a(48),function(e){return i.a.createElement("div",{className:"hat-claim-actions flex-column-wrapper flex-align-items-center"},i.a.createElement("button",{className:"btn btn-accent",onClick:function(){return e.setCurrentStep(e.currentStep+1)}},3===e.currentStep?"Confirm":4===e.currentStep?"login":"Next"),0!==e.currentStep&&3!==e.currentStep&&4!==e.currentStep&&i.a.createElement("button",{className:"btn btn-transparent",onClick:function(){return e.setCurrentStep(e.currentStep-1)}},"Previous"),3===e.currentStep&&i.a.createElement("div",{className:"text-small",style:{textAlign:"center",marginTop:"1.8rem"}},"By selecting 'Confirm', I agree to the Dataswift\xa0",i.a.createElement("a",{href:"https://cdn.dataswift.io/legal/hat-owner-terms-of-service.pdf",rel:"noopener noreferrer",target:"_blank"},"Terms of Service"),"\xa0 and ",i.a.createElement("a",{href:"https://cdn.dataswift.io/legal/dataswift-privacy-policy.pdf",rel:"noopener noreferrer",target:"_blank"},"Privacy Policy"),"."))}),o=(a(49),"Claim your HAT"),u="This information is only used to create your HAT Microserver. Your personal information will never be shared with anyone unless you authorise it.",m="Subscribe to MadHATTERs (Tech news, HAT slanted)",p="Your HAT URL",d="This is your HAT Microserver URL. After clicking 'Next' you will be able to choose your password.",h="Choose your password",f="Your data is precious - keep it safe with a password that is Strong or Very Strong.",w="Your HAT Microserver",v="You are claiming a HAT Microserver with 100MB storage.",g=a(7),b=a(9);function E(e,t){return{type:b.a.EDIT_HAT_CLAIM,name:e,value:t}}function C(e){return{type:b.a.EDIT_CURRENT_STEP,step:e}}function y(e,t){return{type:b.a.EDIT_HAT_PASSWORD,name:e,value:t}}function x(e){return{type:b.a.EDIT_HAT_CLAIM_ERROR_MSG,message:e}}var S=a(19),N=Object(S.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep}}),(function(e){return Object(g.b)({editHatClaim:E},e)}))((function(e){return 0!==e.currentStep?null:i.a.createElement("div",{className:"hat-claim-email flex-column-wrapper flex-content-center flex-align-items-center"},i.a.createElement("h2",null,o),i.a.createElement("div",{className:"text-medium"},u),i.a.createElement("input",{placeholder:"email",type:"email",disabled:!0,value:e.hatClaim.email||"Unspecified email address"}),i.a.createElement("div",{className:"checkbox-container"},i.a.createElement("label",{className:"text-medium",htmlFor:"newsletterOptin"},m,i.a.createElement("input",{id:"newsletterOptin",name:"newsletterOptin",type:"checkbox",checked:e.hatClaim.optins,onChange:function(t){return e.editHatClaim("optins",t.target.checked)}}),i.a.createElement("span",{className:"checkbox-checkmark"}))),i.a.createElement("div",{className:"text-small text-align-left"},"You can change your mind at any time by clicking the unsubscribe link in the footer of any email you receive from us. Learn how we treat your information with respect in our\xa0",i.a.createElement("a",{href:"https://cdn.dataswift.io/legal/dataswift-privacy-policy.pdf",target:"_blank",rel:"noopener noreferrer"},"privacy policy."),"\xa0 By clicking \u2018Next\u2019 you agree to have read the privacy policy."))})),H=(a(50),Object(S.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep}}),(function(e){return Object(g.b)({editHatClaim:E},e)}))((function(e){return 1!==e.currentStep?null:i.a.createElement("div",{className:"hat-claim-url flex-column-wrapper flex-content-center flex-align-items-center"},i.a.createElement("h2",null,p),i.a.createElement("div",{className:"title-hat-domain-wrapper"},i.a.createElement("div",{className:"hat-name"},i.a.createElement("h3",null,e.hatClaim.hatName)),i.a.createElement("div",{className:"hat-domain"},i.a.createElement("h3",null,".",e.hatClaim.hatCluster))),i.a.createElement("div",{className:"text-medium"},d))}))),O=a(57),j=(a(51),a(41)),T=a(42),k=a(44),A=a(43),M=a(45),P=(a(52),function(e){function t(){var e,a;Object(j.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(k.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(n)))).createPasswordLabel=function(e){switch(e){case 0:case 1:return"Too weak";case 2:return"So-so";case 3:return"Strong";case 4:return"Very Strong";default:return""}},a.getPasswordStrengthProgress=function(e){return e<=1?1:2===e?2:4},a}return Object(M.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.props.passwordStrength;return i.a.createElement("div",{className:"password-strength-meter"},e&&i.a.createElement(i.a.Fragment,null,i.a.createElement("progress",{className:"password-strength-meter-progress strength-".concat(e.score),value:this.getPasswordStrengthProgress(e.score),max:"4"}),i.a.createElement("br",null),i.a.createElement("div",{className:"password-strength-meter-label text-strength-".concat(e.score)},this.createPasswordLabel(e.score))))}}]),t}(c.Component)),_=a(53),R=Object(S.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep,password:e.hatClaim.password}}),(function(e){return Object(g.b)({editHatClaim:E,editHatClaimPassword:y,editHatClaimErrorMessage:x},e)}))((function(e){var t=Object(c.useState)(!0),a=Object(O.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(!0),l=Object(O.a)(s,2),o=l[0],u=l[1],m=_((function(t){return function(t){var a=zxcvbn(t).score;e.editHatClaimPassword("passwordStrength",{score:a})}(t)}),400),p=_((function(){return w(e.password.password,e.password.passwordConfirm)}),400);var d=function(t){var a=t.target,r=a.name,n=a.value;e.editHatClaimPassword(r,n),"password"===r&&(m(n),e.editHatClaim(r,n))},w=function(t,a){return t===a?e.password.passwordStrength.score>2&&(e.editHatClaimErrorMessage(""),!0):(a.length>5&&e.editHatClaimErrorMessage("Your passwords don't match!"),!1)};return Object(c.useEffect)((function(){p()}),[e.password.password,e.password.passwordConfirm]),2!==e.currentStep?null:i.a.createElement("div",{className:"hat-claim-password flex-column-wrapper flex-content-center flex-align-items-center"},i.a.createElement("h2",null,h),i.a.createElement("div",{className:"title-hat-domain-wrapper"},i.a.createElement("div",{className:"hat-name"},i.a.createElement("h3",null,e.hatClaim.hatName)),i.a.createElement("div",{className:"hat-domain"},i.a.createElement("h3",null,".",e.hatClaim.hatCluster))),i.a.createElement("div",{className:"text-medium"},f),i.a.createElement("form",null,i.a.createElement("input",{name:"username",autoComplete:"username",type:"text",hidden:!0}),i.a.createElement("div",{className:"input-password-container"},i.a.createElement("input",{type:r?"password":"text",name:"password",autoComplete:"new-password",value:e.hatClaim.password,onChange:function(e){return d(e)},placeholder:"Password"}),i.a.createElement("button",{type:"button",tabIndex:-1,onClick:function(){return n(!r)}},i.a.createElement("i",{className:"material-icons"},r?" visibility_off":" visibility"))),i.a.createElement("div",{className:"input-password-container"},i.a.createElement("input",{type:o?"password":"text",name:"passwordConfirm",autoComplete:"new-password",value:e.password.passwordConfirm,onChange:function(e){return d(e)},placeholder:"Confirm Password"}),i.a.createElement("button",{type:"button",tabIndex:-1,onClick:function(){return u(!o)}},i.a.createElement("i",{className:"material-icons"},o?" visibility_off":" visibility")))),e.password.password.length>0&&i.a.createElement(P,{passwordStrength:e.password.passwordStrength}))})),I=function(e){return 3!==e.currentStep?null:i.a.createElement("div",{className:"hat-claim-url flex-column-wrapper flex-content-center flex-align-items-center"},i.a.createElement("h2",null,w),i.a.createElement("div",{className:"text-medium"},v))},D=a(10),Y=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,L=(a(54),function(e){function t(){return Object(j.a)(this,t),Object(k.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.props;return i.a.createElement("div",null,e&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"notification-banner-container notification-banner-container-".concat(e.type)},"error"===e.type&&i.a.createElement("i",{className:"material-icons notification-banner-container-icon"},"warning"),e.message)))}}]),t}(c.Component)),z=function(){var e=Object(s.a)(n.a.mark((function e(t,a){var r,s=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{method:"post",body:JSON.stringify(a)},e.next=3,B(new Request(t,r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(e){return new Promise((function(t,a){var r;fetch(e).then((function(e){return r=e,e.json()})).then((function(e){r.ok?(r.parsedBody=e,t(r)):a(e)})).catch((function(e){a(e)}))}))},U=["MadHATTERS","HAT Monthly","HCF"],F=function(e){return{email:e.email,termsAgreed:!0,optins:e.optins?U:[],hatName:e.hatName,hatCluster:e.hatCluster,password:e.password}},J=function(){var e=Object(s.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"post",body:JSON.stringify(a),headers:V()},e.next=3,z("https://".concat(a.hatName+"."+a.hatCluster,"/control/v2/auth/claim/complete/").concat(t),a,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function V(){var e=new Headers;return e.append("Content-Type","application/json"),e}a(55);var Z=a(56),q=a.n(Z),G=Object(S.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep}}),(function(e){return Object(g.b)({editHatClaim:E},e)}))((function(e){return 5!==e.currentStep?null:i.a.createElement("div",{className:"hat-claim-success flex-column-wrapper flex-content-center flex-align-items-center"},i.a.createElement("h2",null,"Success!"),i.a.createElement("div",{className:"text-medium"},"Your HAT Microserver with the following URL has been claimed."),i.a.createElement("div",{className:"title-hat-domain-wrapper"},i.a.createElement("div",{className:"hat-name"},i.a.createElement("h3",null,e.hatClaim.hatName)),i.a.createElement("div",{className:"hat-domain"},i.a.createElement("h3",null,".",e.hatClaim.hatCluster))),i.a.createElement("div",{className:"your-hat-issuer"},"Your HAT issuer is"),i.a.createElement("div",{className:"issuer-logo"},i.a.createElement("img",{src:"https://cdn.dataswift.io/dataswift/logo/ds-full-dark.svg",alt:"Dataswift"})),i.a.createElement("div",{className:"drp-image"},i.a.createElement("img",{src:q.a,alt:"Data rights protected"})),i.a.createElement("div",{className:"text-medium"},"This icon appears every time you access your HAT Microserver and whenever you issue instructions to your HAT Microserver. Data rights protection ensures your HAT Microserver is always secure and that the rights to your data are preserved."))}));t.default=Object(S.b)((function(e){return{hatClaim:e.hatClaim.hatClaim,currentStep:e.hatClaim.currentStep,password:e.hatClaim.password,errorMsg:e.hatClaim.errorMsg}}),(function(e){return Object(g.b)({editHatClaim:E,setCurrentStep:C,editHatClaimPassword:y,editHatClaimErrorMessage:x},e)}))((function(e){var t=Object(D.f)(),a=Object(D.g)().claimToken;function r(){return(r=Object(s.a)(n.a.mark((function t(r){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.editHatClaimErrorMessage(""),t.next=4,J(a||"",F(e.hatClaim));case 4:t.sent.parsedBody&&o(r+1),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("claim error",t.t0),e.editHatClaimErrorMessage("Something went wrong, please try again"),o(r-1);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}Object(c.useEffect)((function(){var t=function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var r=t[a].split("=");if(r[0]===e)return decodeURIComponent(r[1])}return null}("email"),a=window.location.hostname,r=a.substring(0,a.indexOf(".")),n=a.substring(a.indexOf(".")+1);t&&(e.editHatClaim("email",t),e.editHatClaim("hatName",r),e.editHatClaim("hatCluster",n),function(e){var t=document.getElementById("zxcvbn");if(!t){var a=document.createElement("script");a.src="https://cdn.dataswift.io/libs/zxcvbn/4.4.2/zxcvbn.min.js",a.id="zxcvbn",a.type="text/javascript",a.async=!0,document.body.appendChild(a),a.onload=function(){e&&e()}}t&&e&&e()}((function(){})))}),[]);var o=function(a){var n;1===a?(n=e.hatClaim.email,Y.test(n)&&e.setCurrentStep(a)):3===a?e.password.passwordStrength.score>=2&&e.password.password===e.password.passwordConfirm&&e.setCurrentStep(a):4===a?function(e){r.apply(this,arguments)}(a):5===a?t.push("/user/login"):e.setCurrentStep(a)};return i.a.createElement("div",{className:"hat-claim flex-column-wrapper"},e.errorMsg&&i.a.createElement(L,{type:"error",message:e.errorMsg}),i.a.createElement("span",{className:"flex-spacer-small"}),i.a.createElement(N,null),i.a.createElement(H,null),i.a.createElement(R,null),i.a.createElement(I,{currentStep:e.currentStep}),i.a.createElement(G,null),i.a.createElement("span",{className:"flex-spacer-large"}),i.a.createElement(l,{currentStep:e.currentStep,setCurrentStep:function(e){return o(e)}}))}))}}]);
//# sourceMappingURL=3.3d26bd16.chunk.js.map